{"ast":null,"code":"/**\n * @licence MIT\n * @author Sergey Melyukov\n */\n\nvar allSettled = require('promise-ext-settled');\n\n/**\n * Image preloader\n *\n * @class ImagePreloader\n * @constructor\n *\n * @param {(String|HTMLImageElement)=} fallbackImage\n * @param {function({status:boolean, value:HTMLImageElement})=} onProgress\n */\nvar ImagePreloader = function (fallbackImage, onProgress) {\n  /**\n   * @type {?function({status: boolean, value: HTMLImageElement})}\n   */\n  this.onProgress = typeof onProgress === 'function' ? onProgress : null;\n  /**\n   * @type {?String|HTMLImageElement}\n   */\n  this.fallbackImage = typeof fallbackImage === 'string' || fallbackImage instanceof HTMLImageElement ? fallbackImage : null;\n};\n\n/**\n * Do simple image preloading.\n *\n * @param {!(String|HTMLImageElement)} imageSource\n *\n * @return {Promise} will be resolved/rejected with HTMLImageElement\n */\nImagePreloader.simplePreload = function (imageSource) {\n  return new Promise(function (resolve, reject) {\n    var img;\n    if (imageSource instanceof HTMLImageElement) {\n      img = imageSource;\n      if (!img.complete) {\n        img.onload = resolve.bind(null, img);\n        img.onerror = img.onabort = reject.bind(null, img);\n      } else if (img.naturalHeight) {\n        resolve(img);\n      } else {\n        reject(img);\n      }\n    } else if (typeof imageSource === 'string') {\n      img = new Image();\n      img.onload = resolve.bind(null, img);\n      img.onerror = img.onabort = reject.bind(null, img);\n      img.src = imageSource;\n    }\n  });\n};\n\n/**\n * Preload image.\n *\n * If fallbackImage-property is defined and correct, then src-attribute for the broken images will replaced by fallbackImage\n * As well, origin image url will be placed to 'data-fail-src' attribute.\n *\n * If onProgress-method is defined, then this method will be calling for every image loading (fulfilled of rejected).\n *\n * @param {...(String|HTMLImageElement|Array<String|HTMLImageElement>)} args\n *\n * @return {Promise} will be resolved with Array<{status:boolean, value:HTMLImageElement}>\n *\n *     status-property - is the status of image loading\n *     status-property will be true if:\n *      - original image loading is ok\n *      - or original image loading is fail but fallback-image loading is ok\n *     status-property will be false if:\n *      - original image loading is fail\n *      - or original image loading is fail and fallback-image loading is fail\n *\n *     value-property - is the image that was loaded\n */\nImagePreloader.prototype.preload = function (args) {\n  var that = this,\n    imagesToLoad = Array.prototype.concat.apply([], Array.prototype.slice.call(arguments));\n  imagesToLoad = imagesToLoad.map(function (imageSource) {\n    return ImagePreloader.simplePreload(imageSource).catch(function (brokenImage) {\n      if (that.fallbackImage) {\n        return ImagePreloader.simplePreload(that.fallbackImage).then(function (fallbackImage) {\n          brokenImage.setAttribute('data-fail-src', brokenImage.src);\n          brokenImage.src = fallbackImage.src;\n          return brokenImage;\n        }, function () {\n          return Promise.reject(brokenImage);\n        });\n      }\n      return Promise.reject(brokenImage);\n    });\n  });\n  return allSettled(imagesToLoad, that.onProgress);\n};\nmodule.exports = ImagePreloader;","map":{"version":3,"names":["allSettled","require","ImagePreloader","fallbackImage","onProgress","HTMLImageElement","simplePreload","imageSource","Promise","resolve","reject","img","complete","onload","bind","onerror","onabort","naturalHeight","Image","src","prototype","preload","args","that","imagesToLoad","Array","concat","apply","slice","call","arguments","map","catch","brokenImage","then","setAttribute","module","exports"],"sources":["C:/Users/Melvi/OneDrive/Documents/Fall 2022/Fundamentals of Software Engineering/SoftwareEngineeringProject/node_modules/image-preloader/src/main.js"],"sourcesContent":["/**\n * @licence MIT\n * @author Sergey Melyukov\n */\n\nvar allSettled = require('promise-ext-settled');\n\n/**\n * Image preloader\n *\n * @class ImagePreloader\n * @constructor\n *\n * @param {(String|HTMLImageElement)=} fallbackImage\n * @param {function({status:boolean, value:HTMLImageElement})=} onProgress\n */\nvar ImagePreloader = function(fallbackImage, onProgress) {\n    /**\n     * @type {?function({status: boolean, value: HTMLImageElement})}\n     */\n    this.onProgress = typeof onProgress === 'function' ? onProgress : null;\n    /**\n     * @type {?String|HTMLImageElement}\n     */\n    this.fallbackImage = typeof fallbackImage === 'string' || fallbackImage instanceof HTMLImageElement ? fallbackImage : null;\n};\n\n/**\n * Do simple image preloading.\n *\n * @param {!(String|HTMLImageElement)} imageSource\n *\n * @return {Promise} will be resolved/rejected with HTMLImageElement\n */\nImagePreloader.simplePreload = function(imageSource) {\n    return new Promise(function(resolve, reject) {\n        var img;\n\n        if (imageSource instanceof HTMLImageElement) {\n            img = imageSource;\n\n            if (!img.complete) {\n                img.onload = resolve.bind(null, img);\n                img.onerror = img.onabort = reject.bind(null, img);\n            } else if (img.naturalHeight) {\n                resolve(img);\n            } else {\n                reject(img);\n            }\n        } else if (typeof imageSource === 'string') {\n            img = new Image();\n            img.onload = resolve.bind(null, img);\n            img.onerror = img.onabort = reject.bind(null, img);\n            img.src = imageSource;\n        }\n    });\n};\n\n/**\n * Preload image.\n *\n * If fallbackImage-property is defined and correct, then src-attribute for the broken images will replaced by fallbackImage\n * As well, origin image url will be placed to 'data-fail-src' attribute.\n *\n * If onProgress-method is defined, then this method will be calling for every image loading (fulfilled of rejected).\n *\n * @param {...(String|HTMLImageElement|Array<String|HTMLImageElement>)} args\n *\n * @return {Promise} will be resolved with Array<{status:boolean, value:HTMLImageElement}>\n *\n *     status-property - is the status of image loading\n *     status-property will be true if:\n *      - original image loading is ok\n *      - or original image loading is fail but fallback-image loading is ok\n *     status-property will be false if:\n *      - original image loading is fail\n *      - or original image loading is fail and fallback-image loading is fail\n *\n *     value-property - is the image that was loaded\n */\nImagePreloader.prototype.preload = function(args) {\n    var that = this,\n        imagesToLoad = Array.prototype.concat.apply([], Array.prototype.slice.call(arguments));\n\n    imagesToLoad = imagesToLoad.map(function(imageSource) {\n        return ImagePreloader.simplePreload(imageSource).catch(function(brokenImage) {\n            if (that.fallbackImage) {\n                return ImagePreloader.simplePreload(that.fallbackImage)\n                    .then(function(fallbackImage) {\n                        brokenImage.setAttribute('data-fail-src', brokenImage.src);\n                        brokenImage.src = fallbackImage.src;\n\n                        return brokenImage;\n                    }, function() {\n                        return Promise.reject(brokenImage);\n                    });\n            }\n\n            return Promise.reject(brokenImage);\n        });\n    });\n\n    return allSettled(imagesToLoad, that.onProgress);\n};\n\nmodule.exports = ImagePreloader;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}